---
import Layout from "../layouts/Layout.astro";
import Auth from "../reactComponents/Auth";
import CurrentYear from "../reactComponents/CurrentYear";
import QuestionsTable from "../reactComponents/QuestionsTable";
import {
  createBigObjectDataForInBuildTime,
  createQuestionUrl,
  getFullUrl,
  mapApiData,
} from "../utils/utils";

import apiData from "../data/api-data";
import { DEFAUTL_INITIAL_CURRENT_CATEGORY_VALUE } from "../settings/settings";

const bigData = createBigObjectDataForInBuildTime(apiData);
const { allCategories } = bigData;

 
---

<Layout>
  <!-- ROW -->
  <div class="row mb-2">
    <!-- LEFT SIDEBAR  -->
    <div class="3333333333333333 col-12 col-lg-6">
      <!-- ROW ROW  -->
      <div class="row mb-2 border">
        <div class="col">
          <h1 class="display-3 fw-bold">
            Testy na prawo jazdy <CurrentYear client:visible />
          </h1>
          <p class="lead">
            Wszystkie pytania egzaminacyjne! Rozpocznij egzamin teoretyczny na
            prawo jazdy lub przeglądaj pytania testowe.
          </p>

          <!-- START LEARNING BUTTON  -->
          <div class="d-grid gap-2 mb-2">
            {
              allCategories.map((cat) => {
                const firstQuestionContainingCurrentCategory = mapApiData(
                  apiData
                ).find((q) => q.categories.includes(cat));

                if (!firstQuestionContainingCurrentCategory) {
                  return null;
                }

                return (
                  <a
                    href={getFullUrl(
                      createQuestionUrl(
                        firstQuestionContainingCurrentCategory,
                        cat
                      )
                    )}
                    class:list={[
                      "btn btn-sm",
                      {
                        "btn-primary":
                          cat === DEFAUTL_INITIAL_CURRENT_CATEGORY_VALUE,
                        "btn-secondary":
                          cat !== DEFAUTL_INITIAL_CURRENT_CATEGORY_VALUE,
                      },
                    ]}
                    role="button"
                  >
                    Rozpocznij naukę testów na prawo jazdy{" "}
                    <CurrentYear client:visible />, kategorii{" "}
                    {cat.toUpperCase()}
                  </a>
                );
              })
            }
          </div>
        </div>
      </div>

      <!-- ROW ROW  -->
      <div class="row mb-2 border">
        <p class="lead">
        <a href="kategorie-prawa-jazdy.html">
          Zmień domyślną kategorię pytań z testów na prawo jazdy jaką chcesz się
          uczyć!
        </a></p>
      </div>

      <!-- ROW ROW  -->
      <div class="row mb-2 border">
        <p class="lead">
          Ostatnią aktualizację bazy pytań testowych zrobiłem w lutym <CurrentYear
            client:visible
          /> roku.
        </p>
      </div>

      <!-- ROW ROW  -->
      <div class="row mb-2 border">
        
        <div class="col">
          <h2 class="display-5">
            <span> Największa darmowa baza </span>
            <span class="badge bg-warning text-dark"> 3 </span>
            <span> wszystkich pytań testowych na prawo jazdy wszystkich kategorii !!! </span>
          </h2>
          <h3>
            <span> Dostępne kategorie to: </span>
            <strong class="small"> {allCategories.join(", ")} </strong>
          </h3>
          <p>
            <strong> Kliknij poniżej i wybierz aktualną kategorię z testów na prawo jazdy której chcesz się teraz uczyć: </strong>
          </p>
          <div>
            {allCategories.map(cat => {

              return <button class="btn btn-outline-secondary p-1 me-1 mb-1"  type="button">
              <strong> {cat} </strong>
              <br>
              <span class="small"> 3 - pytań</span>
            </button>
            })}
            
          
           
          </div>
        </div>


      </div>


      <!-- ROW ROW  -->
      <div class="row mb-2 border">wiersz</div>


      <!-- ROW ROW  -->
      <div class="row mb-2 border">wiersz</div>


      <!-- ROW ROW  -->
      <div class="row mb-2 border">wiersz</div>


      <!-- ROW ROW  -->
      <div class="row mb-2 border">wiersz</div>

      
    
    
    
    
    </div>

    <!-- RIGHT SIDEBAR  -->
    <div class="4444444444444444 col-12 col-lg-6 border">
      <p>RIGHT SIDEBAR</p>

      <pre class="text-start">{JSON.stringify(bigData, null,2)}</pre>
    </div>
  </div>

  <QuestionsTable client:visible />
</Layout>
